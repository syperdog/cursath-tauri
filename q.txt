### Описание ролевой модели и логики работы ИС СТО

В системе предусмотрено **5 ролей пользователей**, каждая из которых имеет свой уникальный интерфейс и набор прав доступа, соответствующий должностным обязанностям.

#### 1. Администратор (Владелец)

Обладает правами «суперпользователя».

- Имеет полный доступ ко всем модулям системы.
    
- Может просматривать интерфейсы и действия любой роли для контроля работы персонала.
    
- Управляет учетными записями сотрудников и справочниками.
    

#### 2. Мастер-Приёмщик 

Управляет жизненным циклом заказа от обращения клиента до выдачи авто.

- **Регистрация:** Осуществляет поиск клиента/автомобиля в базе данных или регистрирует новых, если они посещают СТО впервые. Создает документ «Заказ-наряд».
    
- **Ценообразование:** После получения данных от Кладовщика (стоимость запчастей) добавляет к смете стоимость работ (нормо-часы) и формирует итоговую сумму заказа.
    
- **Согласование:** Связывается с клиентом для утверждения перечня работ и стоимости.
    
- **Распределение:** Назначает на выполнение работ конкретного Работника (Слесаря, Электрика и т.д.) в зависимости от его специализации и сложности задачи.
    
- **Выдача:** После получения уведомления о завершении работ проверяет статус заказа, уведомляет клиента о готовности и закрывает заказ-наряд после передачи автомобиля.
    

#### 3. Диагност

Отвечает за выявление неисправностей (первичный этап ремонта).

- Получает задачу на диагностику от Мастера-Приёмщика.
    
- Проводит осмотр автомобиля и формирует в системе **дефектовочную ведомость** (список выявленных неисправностей).
    
- Передает заказ на этап подбора запчастей (Кладовщику), не проставляя цены, а только указывая техническую суть проблем.
    

#### 4. Кладовщик (Снабженец)

Отвечает за материальное обеспечение заказа.

- Получает дефектовочную ведомость после диагностики.
    
- Подбирает необходимые детали, используя внутренний склад или базы данных поставщиков.
    
- Проставляет в заказе **стоимость запчастей** и сроки их поступления.
    
- Передает заказ обратно Мастеру-Приёмщику для финального расчета и согласования с клиентом.
    
- Ведет складской учет (списание деталей при выдаче Работнику).
    

#### 5. Работник (Слесарь, моторист, электрик, Шиномонтажник,  Развальщик,  Агрегатчик,  Арматурщик)

Технический исполнитель ремонтных работ.

- Получает назначенный Мастером-Приёмщиком заказ-наряд со статусом «В работе».
    
- Видит утвержденный список работ и неисправностей.
    
- Формирует запрос на выдачу запчастей со склада и получает их у Кладовщика.
    
- По факту выполнения работ меняет статус заказа на «Завершено», уведомляя Мастера-Приёмщика.


**Логика работы СТО:**

1. **Приемка:** Клиент прибывает на СТО. **Мастер-Приёмщик** опрашивает клиента. Поиск осуществляется по номеру телефона, Госномеру или VIN-коду автомобиля.
    
    - Если клиент или машина уже есть в базе — Мастер открывает их карточку.
        
    - Если клиент впервые — Мастер создает профиль клиента (ФИО, Телефон). Затем добавляет автомобиль. Для исключения ошибок ввода и ускорения процесса используется **API для расшифровки VIN-кода**, которое автоматически заполняет Марку, Модель и Год выпуска. При вводе VIN система проверяет, не обслуживалась ли эта машина ранее у другого владельца.
        
2. **Запуск заказа:** Мастер-Приёмщик создает **Заказ-наряд**, записывает жалобы клиента и передает его Диагносту. Статус заказа меняется на **«Диагностика»**.
    
3. **Дефектовка:** Диагност получает заказ, проводит осмотр и выбирает выявленные неисправности из справочника услуг. Для уточнений он использует поле «Описание» (комментарий к неисправности). Завершив осмотр, он передает заказ на следующий этап.
    
4. **Снабжение:** Статус меняется на **«Подбор деталей»**. Кладовщик видит список неисправностей. Используя каталоги поставщиков, он подбирает несколько вариантов запчастей для каждой поломки (например: «Оригинал» и «Бюджетный аналог»), проставляя их стоимость и наличие.
    
5. **Согласование:** Заказ возвращается Мастеру-Приёмщику со статусом **«Согласование»**.
    
    - Мастер добавляет к стоимости запчастей **стоимость ремонтных работ** (услуг).
        
    - Мастер связывается с клиентом. Клиент выбирает, какие неисправности устранять сейчас и какой ценовой категории детали использовать.
        
    - Мастер отмечает в системе выбранные позиции («галочками»), фиксируя итоговую сумму заказ-наряда.
        
    - Мастер назначает **Работника** (Слесаря) с соответствующей квалификацией.
        
6. **Ремонт:** Заказ переходит в статус **«В работе»**. Работник видит фронт работ, получает необходимые детали у Кладовщика (со склада) и приступает к ремонту. По мере выполнения он отмечает статус каждой конкретной задачи (например, «Заменено»). После окончания всех работ нажимает «Завершить заказ».
    
7. **Выдача:** Статус меняется на **«Контроль качества / Готов к выдаче»**. Мастер-Приёмщик проверяет выполненную работу. Убедившись в качестве, он звонит клиенту с приглашением забрать автомобиль. При выдаче заказ закрывается, формируется итоговый счет и акт выполненных работ, производится оплата.

## 6. Визуализация Интерфейса (ASCII Mockups)

**Концепция интерфейса:**
Приложение построено по принципу **Single Window Interface**.
*   **Главный экран (Dashboard)**: Всегда остается на фоне. Содержит основные инструменты (Календарь, Список заказов, Поиск).
*   **Всплывающие окна (Popups)**: Все остальные действия (создание заказа, просмотр деталей, добавление клиента) открываются в виде модальных окон поверх главного экрана. Это позволяет не терять контекст и не нагромождать интерфейс лишними переходами.

### 6.1. Меню входа (Администратор / Мастер-Приёмщик / Диагност / Кладовщик)

Стандартное меню входа состоит из двух полей ввода: Логин и Пароль.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║                                                                       ║
║                    🛠️  AutoService Pro v2.0                          ║
║                                                                       ║
║           ┌─────────────────────────────────────────────────┐         ║
║           │  👤 ЛОГИН:  [ admin__________________________ ] │         ║
║           └─────────────────────────────────────────────────┘         ║
║                                                                       ║
║           ┌─────────────────────────────────────────────────┐         ║
║           │  🔑 ПАРОЛЬ: [ ***********____________________ ] │         ║
║           └─────────────────────────────────────────────────┘         ║
║                                                                       ║
║                     [ 🚀 ВОЙТИ В СИСТЕМУ ]                            ║
║                                                                       ║
╚═══════════════════════════════════════════════════════════════════════╝
```

### 6.2. Меню входа (Работник)

Для работников (слесарей, электриков, мотористов и др.) используется упрощенный вход по PIN-коду для быстрого доступа через терминал в цеху.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║                                                                       ║
║               🔧 ВХОД ДЛЯ СОТРУДНИКОВ (ТЕРМИНАЛ ЦЕХА)                 ║
║                                                                       ║
║                       ┌─────────────────────┐                         ║
║                       │    *  *  *  _       │                         ║
║                       └─────────────────────┘                         ║
║                                                                       ║
║               ┌─────┐  ┌─────┐  ┌─────┐  ┌─────┐                      ║
║               │  1  │  │  2  │  │  3  │  │  4  │                      ║
║               └─────┘  └─────┘  └─────┘  └─────┘                      ║
║               ┌─────┐  ┌─────┐  ┌─────┐  ┌─────┐                      ║
║               │  5  │  │  6  │  │  7  │  │  8  │                      ║
║               └─────┘  └─────┘  └─────┘  └─────┘                      ║
║               ┌─────┐  ┌─────┐  ┌─────┐  ┌─────┐                      ║
║               │  9  │  │  0  │  │ 🔙  │  │ 🆗  │                      ║
║               └─────┘  └─────┘  └─────┘  └─────┘                      ║
║                                                                       ║
╚═══════════════════════════════════════════════════════════════════════╝
```

### 6.3. Главное меню (Мастер-Приёмщик)

Обновленный дизайн главного экрана мастера-приёмщика.

**Элементы интерфейса:**
1.  **Строка поиска**: Для быстрого поиска заказов, клиентов или автомобилей.
2.  **Календарь**: Для выбора даты и просмотра загрузки.
3.  **Таблица заказов**: Отображает заказы на выбранный в календаре день.
4.  **Кнопка выхода**: Расположена в правом верхнем углу.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  🛠️  AutoService Pro                                     [ ✖ ВЫХОД ] ║
╠═══════════════════════════════════════════════════════════════════════╣
║  🔍 [ Поиск заказа, клиента или авто...                     ]  [ 🔍 ] ║
╠═══════════════════════════════════════════════════════════════════════╣
║                                                                       ║
║  📅 КАЛЕНДАРЬ:   [ ◀ ]    Ноябрь 2025    [ ▶ ]   [ 🗄️ АРХИВ ]        ║
║  ┌────┬────┬────┬────┬────┬────┬────┐                                 ║
║  │ Пн │ Вт │ Ср │ Чт │ Пт │ Сб │ Вс │                                 ║
║  ├────┼────┼────┼────┼────┼────┼────┤                                 ║
║  │    │    │    │    │    │ 1  │ 2  │                                 ║
║  │ 3  │ 4  │ 5  │ 6  │ 7  │ 8  │ 9  │                                 ║
║  │ 10 │ 11 │ 12 │ 13 │ 14 │ 15 │ 16 │                                 ║
║  │ 17 │ 18 │ 19 │ 20 │ 21 │ 22 │ 23 │                                 ║
║  │ 24 │ 25 │ 26 │ 27 │ 28 │██29│ 30 │                                 ║
║  └────┴────┴────┴────┴────┴────┴────┘                                 ║
║                                                                       ║
║  📋 ЗАКАЗЫ НА 29.11.2025:                                             ║
║  ┌─────┬───────────────────┬───────────────────┬────────────┬───────┐ ║
║  │  #  │ Клиент            │ Автомобиль        │ Статус     │ Сумма │ ║
║  ├─────┼───────────────────┼───────────────────┼────────────┼───────┤ ║
║  │ 105 │ Петров П.П.       │ Toyota Camry      │ 🔧 В работе│ 5000  │ ║
║  │ 106 │ Сидоров А.А.      │ Ford Focus        │ ✅ Готов   │ 3500  │ ║
║  │ 107 │ Иванов И.И.       │ BMW X5            │ 🔍 Диагностика| ----  │ ║
║  └─────┴───────────────────┴───────────────────┴────────────┴───────┘ ║
║                                                                       ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Поле Поиска (Search Bar)**:
    *   **Действие**: При клике или вводе текста открывается всплывающее окно **"Поиск Клиента или Авто"** (см. ниже).
    *   **Цель**: Найти существующего клиента/авто или начать процесс создания нового заказа.

2.  **Календарь (Calendar)**:
    *   **Клик по дате**: Обновляет таблицу "ЗАКАЗЫ" ниже, показывая список заказов на выбранный день.
    *   **Стрелки [◀] / [▶]**: Переключение месяца.

3.  **Кнопка [ 🗄️ АРХИВ ]**:
    *   **Действие**: Открывает окно просмотра архива завершенных и отмененных заказов (см. п. 6.17).

4.  **Таблица Заказов (Orders Table)**:
    *   **Клик по строке заказа**: Открывает всплывающее окно **"Детали Заказа"** для просмотра и редактирования выбранного наряда.

5.  **Кнопка [ ✖ ВЫХОД ]**:
    *   **Действие**: Возвращает пользователя на экран логина.

### 6.7. Детали Заказа (Order Details Popup)

**Всплывающее окно**, открывающееся поверх главного экрана при клике на заказ. Позволяет просмотреть полную информацию, не покидая контекст календаря.
Для каждой неисправности отображается её текущий статус (Готово / В работе / Ожидание).

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  📄 Заказ-наряд #105                                     [ ✖ ЗАКРЫТЬ ]║
╠═══════════════════════════════════════════════════════════════════════╣
║  👤 КЛИЕНТ: Петров П.П. (+375 () ___-__-__)                            ║
║  🚗 АВТО:   Toyota Camry (A 123 AA 77) | VIN: ...X12345               ║
║  🔧 СТАТУС ЗАКАЗА: [ 🔧 В РАБОТЕ ]                                    ║
╠═══════════════════════════════════════════════════════════════════════╣
║  📋 СПИСОК НЕИСПРАВНОСТЕЙ И РАБОТ:                                    ║
║  ┌─────────────────────────────────────────────────────────────────┐  ║
║  │ [-] 1. Стук в передней подвеске ................. [ ⏳ В РАБОТЕ ]│  ║
║  │  │                                                              │  ║
║  │  ├── 🛠️ РАБОТЫ:                                                 │  ║
║  │  │   • Диагностика ходовой ........................ 1000 $   │  ║
║  │  │   • Замена стоек стабилизатора ................. 3000 $   │  ║
║  │  │                                                              │  ║
║  │  └── 📦 ЗАПЧАСТИ:                                               │  ║
║  │      • Стойка стабилизатора (Toyota) x2 ........... 5000 $   │  ║
║  │                                                                 │  ║
║  │ [+] 2. Плановое ТО (Замена масла) ............... [ ✅ ГОТОВО   ]│  ║
║  │ [+] 3. Не горит правый габарит .................. [ ❌ НЕ НАЧАТО]│  ║
║  └─────────────────────────────────────────────────────────────────┘  ║
╠═══════════════════════════════════════════════════════════════════════╣
║                                              ИТОГО: 9000 $         ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Список неисправностей**:
    *   **Клик по `[+]` / `[-]`**: Разворачивает или сворачивает детализацию по конкретной неисправности (работы и запчасти).
    *   **Статусы**: Отображают текущее состояние работ по каждой задаче (информативно).

2.  **Контекстные кнопки (зависят от статуса)**:
    *   Если статус **"Готов к выдаче"**: Отображается кнопка `[ 🏁 ОФОРМИТЬ ВЫДАЧУ ]`, которая открывает окно выдачи (см. п. 6.15).
    *   Для всех статусов доступна кнопка `[ ❌ ОТМЕНИТЬ ЗАКАЗ ]`, которая открывает окно подтверждения отмены (см. п. 6.16).
    *   Для других статусов: Кнопки управления недоступны (Мастер не выполняет работы сам).

3.  **Кнопка [ ✖ ЗАКРЫТЬ ]**:
    *   **Действие**: Закрывает окно и возвращает к главному меню.

### 6.8. Согласование с клиентом (Client Approval)

Отдельное состояние окна "Детали заказа", когда мастер-приёмщик согласовывает найденные неисправности и стоимость работ с клиентом. В этом режиме можно отмечать галочками пункты, на которые клиент дал согласие.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  📄 Заказ-наряд #105                                     [ ✖ ОТМЕНА  ]║
╠═══════════════════════════════════════════════════════════════════════╣
║  👤 КЛИЕНТ: Петров П.П.                                               ║
║  ⚠️ СТАТУС: [ ⏳ СОГЛАСОВАНИЕ ]                                       ║
╠═══════════════════════════════════════════════════════════════════════╣
║  📋 СОГЛАСОВАНИЕ РАБОТ И ЗАПЧАСТЕЙ:                                   ║
║  ┌─────────────────────────────────────────────────────────────────┐  ║
║  │ [x] 1. Стук в передней подвеске (Всего: 9000 $)              │  ║
║  │  │  [x] Диагностика ходовой ....................... 1000 $   │  ║
║  │  │  [x] Замена стоек стабилизатора ................ 3000 $   │  ║
║  │  │  [x] Стойка стабилизатора (Toyota) x2 .......... 5000 $   │  ║
║  │                                                                 │  ║
║  │ [ ] 2. Дополнительные рекомендации (Всего: 15000 $)          │  ║
║  │  │  [ ] Замена тормозных дисков ................... 4000 $   │  ║
║  │  │  [ ] Тормозные диски (Brembo) x2 ............... 11000 $  │  ║
║  └─────────────────────────────────────────────────────────────────┘  ║
╠═══════════════════════════════════════════════════════════════════════╣
║  ИТОГО К ОПЛАТЕ: 9000 $ (Без учета отклоненных: 15000 $.)        ║
║  [ ✅ ПОДТВЕРДИТЬ ВЫБРАННОЕ ]             [ ❌ ОТКЛОНИТЬ ВСЁ ]        ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Чекбоксы `[x]` / `[ ]`**:
    *   **Действие**: Клик переключает выбор. При снятии галочки с группы (например, "Дополнительные рекомендации") автоматически снимаются галочки со всех вложенных пунктов. Сумма "ИТОГО" пересчитывается мгновенно.

2.  **Кнопка [ ✅ ПОДТВЕРДИТЬ ВЫБРАННОЕ ]**:
    *   **Действие**: Сохраняет выбор. **Только отмеченные галочками работы и запчасти переходят в заказ**.
    *   Неотмеченные пункты помечаются в БД как **"Отклонено клиентом"**, но остаются в истории для статистики.
    *   **Работники видят только согласованные пункты** — отклоненные не отображаются в их интерфейсе.
    *   Меняет статус заказа на **"Согласовано"** (или "Ожидает назначения").
    *   Далее мастер должен назначить исполнителей (см. п. 6.11).

3.  **Кнопка [ ❌ ОТКЛОНИТЬ ВСЁ ]**:
    *   **Действие**: Клиент отказался от ремонта полностью.
    *   **Логика**: Заказ **не удаляется**. Статус меняется на **"К оплате"**.
    *   В итоговый счет включается только стоимость **проведенной диагностики** (и мойки, если была).
    *   Заказ передается на кассу/выдачу.

4.  **Кнопка [ ✖ ОТМЕНА ]**:
    *   **Действие**: Закрывает окно без сохранения изменений.

### 6.9. Поиск Клиента или Авто (Search)

Всплывающее окно для поиска по базе данных. Позволяет найти клиента по имени, телефону или автомобиль по госномеру/VIN.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  🔍 ПОИСК КЛИЕНТА ИЛИ АВТО                               [ ✖ ЗАКРЫТЬ ]║
╠═══════════════════════════════════════════════════════════════════════╣
║  🔎 ЗАПРОС: [ Toyota Camry_______________________________ ]           ║
╠═══════════════════════════════════════════════════════════════════════╣
║  📋 РЕЗУЛЬТАТЫ ПОИСКА (Выберите кликом):                              ║
║  ┌─────────────────────────────────────────────────────────────────┐  ║
║  │ 1. 👤 Петров П.П. | 🚗 Toyota Camry (A 123 AA 77)               │  ║
║  │    📞 +375 () ___-__-__                                          │  ║
║  │                                                                 │  ║
║  │ 2. 👤 Сидоров А.А. | 🚗 Toyota Camry (E 555 KX 99)              │  ║
║  │    📞 +375 () ___-__-__                                          │  ║
║  │                                                                 │  ║
║  │ 3. 👤 ООО "Такси-Город" | 🚗 Toyota Camry (Т 888 ТТ 77)         │  ║
║  │    📞 +375 () ___-__-__                                          │  ║
║  └─────────────────────────────────────────────────────────────────┘  ║
╠═══════════════════════════════════════════════════════════════════════╣
║  [ ➕ НОВЫЙ КЛИЕНТ ]    [ ➕ НОВОЕ АВТО ]                             ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Поле Запроса**:
    *   **Ввод текста**: Фильтрует список результатов в реальном времени.

2.  **Результаты поиска**:
    *   **Клик по строке**: Выбирает клиента/авто и открывает окно **"Создание Заказа"** для этого авто.

3.  **Кнопки [ ➕ НОВЫЙ КЛИЕНТ ] / [ ➕ НОВОЕ АВТО ]**:
    *   **Действие**: Открывают соответствующие окна регистрации (см. п. 6.11 и 6.12).

4.  **Кнопка [ ✖ ЗАКРЫТЬ ]**:
    *   **Действие**: Закрывает окно поиска.

### 6.10. Создание Заказа (Create Order Popup)

Всплывающее окно, которое появляется после выбора клиента из поиска. Позволяет быстро создать новый заказ-наряд для выбранного автомобиля.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  ✨ НОВЫЙ ЗАКАЗ-НАРЯД                                    [ ✖ ОТМЕНА  ]║
╠═══════════════════════════════════════════════════════════════════════╣
║  👤 КЛИЕНТ: Петров П.П.                                               ║
║  🚗 АВТО:   Toyota Camry (A 123 AA 77)                                ║
╠═══════════════════════════════════════════════════════════════════════╣
║  🔢 ТЕКУЩИЙ ПРОБЕГ: [ 155000_______ ] км                              ║
║     ℹ️ Предыдущий пробег: 150000 км (10.10.2025)                     ║
╠═══════════════════════════════════════════════════════════════════════╣
║  📝 ПРИЧИНА ОБРАЩЕНИЯ:                                                ║
║  ┌─────────────────────────────────────────────────────────────────┐  ║
║  │ Стук в подвеске..._                                             │  ║
║  │                                                                 │  ║
║  └─────────────────────────────────────────────────────────────────┘  ║
╠═══════════════════════════════════════════════════════════════════════╣
║  [ 🚀 СОЗДАТЬ ЗАКАЗ ]    [ 🕒 ИСТОРИЯ АВТО ]                          ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Поле "Текущий пробег"**:
    *   **Ввод**: Обязательное поле. Позволяет отслеживать историю пробега.
    *   **Валидация**: Система автоматически показывает предыдущий пробег из последнего заказа.
    *   **Предупреждение**: Если введенный пробег меньше предыдущего, появляется предупреждение о возможной ошибке.

2.  **Поле "Причина обращения"**:
    *   **Ввод**: Текстовое описание жалоб клиента.

3.  **Кнопка [ 🚀 СОЗДАТЬ ЗАКАЗ ]**:
    *   **Действие**: Создает новый заказ-наряд со статусом "Диагностика" и открывает его детали.

4.  **Кнопка [ 🕒 ИСТОРИЯ АВТО ]**:
    *   **Действие**: Показывает список предыдущих заказов по этому автомобилю.

5.  **Кнопка [ ✖ ОТМЕНА ]**:
    *   **Действие**: Отменяет создание заказа.

### 6.11. Создание Нового Клиента (New Client Popup)

Всплывающее окно для регистрации нового клиента в базе данных.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  👤 НОВЫЙ КЛИЕНТ                                         [ ✖ ОТМЕНА  ]║
╠═══════════════════════════════════════════════════════════════════════╣
║  ФИО:     [ _______________________________________________________ ] ║
║  ТЕЛЕФОН: [ +375 () ___-__-__ ]                                      ║
║  АДРЕС:   [ _______________________________________________________ ] ║
╠═══════════════════════════════════════════════════════════════════════╣
║  [ 💾 СОХРАНИТЬ ]                                                     ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Поля ввода**:
    *   **ФИО, Телефон, Адрес**: Стандартный ввод текста. Телефон имеет маску ввода.

2.  **Кнопка [ 💾 СОХРАНИТЬ ]**:
    *   **Действие**: Создает запись клиента в БД. После успеха может предложить сразу добавить автомобиль.

3.  **Кнопка [ ✖ ОТМЕНА ]**:
    *   **Действие**: Закрывает окно без сохранения.

### 6.12. Добавление Автомобиля (New Car Flow)

Процесс добавления автомобиля состоит из двух этапов: сначала выбирается владелец (клиент), затем заполняются данные авто.

**Шаг 1: Поиск и выбор владельца**
Если создание авто начато не из карточки клиента, сначала появляется окно поиска.

### 6.12. Добавление Автомобиля (New Car Flow)

Процесс добавления автомобиля состоит из двух этапов: сначала выбирается владелец (клиент), затем заполняются данные авто.

**Шаг 1: Поиск и выбор владельца**
Если создание авто начато не из карточки клиента, сначала появляется окно поиска.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  🔍 ВЫБОР ВЛАДЕЛЬЦА ДЛЯ НОВОГО АВТО                      [ ✖ ОТМЕНА  ]║
╠═══════════════════════════════════════════════════════════════════════╣
║  🔎 ПОИСК КЛИЕНТА: [ Петров_______________________________ ]          ║
╠═══════════════════════════════════════════════════════════════════════╣
║  📋 РЕЗУЛЬТАТЫ (Выберите кликом):                                     ║
║  ┌─────────────────────────────────────────────────────────────────┐  ║
║  │ 1. 👤 Петров П.П. | 📞 +375 (29) 111-22-33                      │  ║
║  │ 2. 👤 Петров С.С. | 📞 +375 (33) 444-55-66                      │  ║
║  └─────────────────────────────────────────────────────────────────┘  ║
╠═══════════════════════════════════════════════════════════════════════╣
║  [ ➕ СОЗДАТЬ НОВОГО КЛИЕНТА ]                                        ║
╚═══════════════════════════════════════════════════════════════════════╝
```

**Шаг 2: Заполнение данных автомобиля**
После выбора клиента открывается форма добавления авто.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  🚗 НОВЫЙ АВТОМОБИЛЬ                                     [ ✖ ОТМЕНА  ]║
╠═══════════════════════════════════════════════════════════════════════╣
║  ВЛАДЕЛЕЦ: Петров П.П.                                                ║
╠═══════════════════════════════════════════════════════════════════════╣
║  VIN:          [ WBA1234567890ABCD_____________________________ ]  🔄 ║
║  ℹ️ После ввода VIN марка, модель и год заполнятся автоматически     ║
╠═══════════════════════════════════════════════════════════════════════╣
║  МАРКА/МОДЕЛЬ: [ Toyota Camry_____________________________________ ]  ║
║  ГОСНОМЕР:     [ A 123 AA 77 ]                                        ║
║  ГОД ВЫПУСКА:  [ 2015__ ]                                             ║
║  ПРОБЕГ (км):  [ 150000______ ]                                       ║
╠═══════════════════════════════════════════════════════════════════════╣
║  [ 💾 СОХРАНИТЬ ]                                                     ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Поле VIN**:
    *   **Автозаполнение**: После ввода 17 символов VIN, система автоматически вызывает API для расшифровки.
    *   **Индикатор 🔄**: Показывает процесс загрузки данных.
    *   **Результат**: Поля "Марка/Модель" и "Год выпуска" заполняются автоматически. Пользователь может их отредактировать при необходимости.
    *   **Проверка дубликатов**: Система проверяет, не зарегистрирован ли этот VIN у другого владельца.

2.  **Остальные поля**:
    *   **Марка/Модель, Госномер, Год, Пробег**: Ручной ввод или автозаполнение (для VIN). Пробег фиксируется как начальный.

3.  **Кнопка [ 💾 СОХРАНИТЬ ]**:
    *   **Действие**: Привязывает новый автомобиль к выбранному клиенту и сохраняет в БД.

4.  **Кнопка [ ✖ ОТМЕНА ]**:
    *   **Действие**: Отменяет добавление.

### 6.11. Назначение Исполнителей (Assign Workers Popup)

После согласования работ с клиентом, мастер-приёмщик должен распределить задачи между работниками цеха.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  👷 НАЗНАЧЕНИЕ ИСПОЛНИТЕЛЕЙ (Заказ #105)                 [ ✖ ОТМЕНА ] ║
╠═══════════════════════════════════════════════════════════════════════╣
║  СПИСОК СОГЛАСОВАННЫХ РАБОТ:                                          ║
║  ┌───┬───────────────────────────────┬─────────────────────────────┐  ║
║  │ # │ Работа                            │ Исполнитель             │  ║
║  ├───┼───────────────────────────────────┼─────────────────────────┤  ║
║  │ 1 │ Замена переднего левого рычага    │ [ Сидоров С.С. (Слес) ▼]│  ║
║  │ 2 │ Диагностика электрооборудования   │ [ Смирнов А.А. (Элек) ▼]│  ║
║  └───┴───────────────────────────────────┴─────────────────────────┘  ║
╠═══════════════════════════════════════════════════════════════════════╣
║  [ 💾 СОХРАНИТЬ И ПЕРЕДАТЬ В ЦЕХ ]                                    ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Выбор Исполнителя**:
    *   **Фильтрация по специальности**: Система **автоматически ограничивает** список доступных работников в зависимости от типа работы.
        *   *Пример*: Для работы "Ремонт проводки" в списке будут доступны только **Электрики**. Мастер не сможет назначить Слесаря или Моториста.
        *   *Пример*: Для работы "Шиномонтаж" — только **Шиномонтажники**.
    *   Это исключает ошибки назначения неквалифицированного персонала.
    *   **Важно**: Каждая работа назначается **отдельно**. Если в заказе 3 работы разных типов (слесарные, электрика, шиномонтаж), то каждая будет у своего специалиста. Работник в своем терминале (9.1) видит только **свои** задачи по конкретной машине.

2.  **Кнопка [ 💾 СОХРАНИТЬ... ]**:
    *   **Действие**: Закрепляет задачи за выбранными работниками. Заказ появляется в их личных терминалах (см. п. 9.1). Статус заказа меняется на "В работе".

### 6.13. Регистрация Предоплаты (Prepayment Popup)

Всплывающее окно для внесения аванса от клиента. Может быть вызвано мастером-приёмщиком на любом этапе работы с заказом.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  � РЕГИСТРАЦИЯ ПРЕДОПЛАТЫ (Заказ #105)                  [ ✖ ОТМЕНА ] ║
╠═══════════════════════════════════════════════════════════════════════╣
║  � КЛИЕНТ: Петров П.П.                                               ║
║  � АВТО:   BMW X5 (A 123 AA 77)                                      ║
║  📊 ИТОГОВАЯ СУММА ЗАКАЗА: 9000 $                                     ║
╠═══════════════════════════════════════════════════════════════════════╣
║  � СУММА АВАНСА: [ 3000___________ ] $                               ║
║                                                                       ║
║  СПОСОБ ОПЛАТЫ:                                                       ║
║  ○ Наличные    ● Карта    ○ Безналичный (Р/С)                        ║
╠═══════════════════════════════════════════════════════════════════════╣
║  [ 💾 ЗАРЕГИСТРИРОВАТЬ АВАНС ]                                        ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Поле "Сумма аванса"**:
    *   **Валидация**: Сумма не может превышать итоговую стоимость заказа.
    *   **Предупреждение**: Если введенная сумма больше текущей стоимости, система выдаст предупреждение.

2.  **Способ оплаты**:
    *   Радио-кнопки для фиксации метода внесения аванса.

3.  **Кнопка [ 💾 ЗАРЕГИСТРИРОВАТЬ АВАНС ]**:
    *   **Действие**: Сохраняет информацию о предоплате в БД.
    *   В карточке заказа появляется отметка "Внесен аванс: X $".
    *   При выдаче автомобиля (п. 6.15) эта сумма автоматически вычитается из итоговой суммы к оплате.

### 6.14. История Автомобиля (Car History Popup)

Всплывающее окно, вызываемое из меню создания заказа. Позволяет мастеру быстро оценить предыдущие работы по автомобилю.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  🕒 ИСТОРИЯ ОБСЛУЖИВАНИЯ: Toyota Camry (A 123 AA 77)     [ ✖ ЗАКРЫТЬ ]║
╠═══════════════════════════════════════════════════════════════════════╣
║  ┌─────┬────────────┬──────────┬──────────────────────┬─────────────┐ ║
║  │  #  │ Дата       │ Пробег   │ Причина обращения    │ Итог        │ ║
║  ├─────┼────────────┼──────────┼──────────────────────┼─────────────┤ ║
║  │ 98  │ 10.10.2025 │ 150 000  │ Плановое ТО          │ 5000 $   │ ║
║  │ 85  │ 01.05.2025 │ 145 000  │ Стук в подвеске      │ 12000 $  │ ║
║  │ 70  │ 15.01.2025 │ 140 000  │ Горит Check Engine   │ 1000 $   │ ║
║  └─────┴────────────┴──────────┴──────────────────────┴─────────────┘ ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Таблица истории**:
    *   **Скролл**: Просмотр старых записей.
    *   **Клик по строке**: Открывает окно **"Архивный Заказ"** (см. п. 6.14) для просмотра выполненных работ и запчастей.

2.  **Кнопка [ ✖ ЗАКРЫТЬ ]**:
    *   **Действие**: Закрывает окно истории и возвращает к созданию нового заказа.

### 6.15. Архивный Заказ (Archived Order Popup)

Всплывающее окно для просмотра деталей завершенного заказа из истории. Доступно только для чтения.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  🗄️ АРХИВ: Заказ-наряд #85 от 01.05.2025                 [ ✖ ЗАКРЫТЬ ]║
╠═══════════════════════════════════════════════════════════════════════╣
║  👤 КЛИЕНТ: Петров П.П.                                               ║
║  🚗 АВТО:   Toyota Camry (A 123 AA 77) | Пробег: 145 000 км           ║
║  📝 ПРИЧИНА: Стук в подвеске                                          ║
╠═══════════════════════════════════════════════════════════════════════╣+
║  📋 ВЫПОЛНЕННЫЕ РАБОТЫ И ЗАПЧАСТИ:                                    ║
║  ┌─────────────────────────────────────────────────────────────────┐  ║
║  │ [-] 1. Стук в передней подвеске (Всего: 12000 $)             │  ║
║  │  │  • Диагностика ходовой ......................... 1000 $   │  ║
║  │  │  • Замена рычагов .............................. 4000 $   │  ║
║  │  │  • Рычаг передний (Toyota) x2 .................. 7000 $   │  ║
║  │                                                                 │  ║
║  └─────────────────────────────────────────────────────────────────┘  ║
╠═══════════════════════════════════════════════════════════════════════╣
║  ИТОГО ОПЛАЧЕНО: 12000 $                                           ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Кнопка [ ✖ ЗАКРЫТЬ ]**:
    *   **Действие**: Закрывает окно архива и возвращает к списку истории.

### 6.16. Оформление Выдачи (Order Completion Popup)

Финальный этап работы с заказом. Мастер-Приёмщик принимает оплату и передает автомобиль клиенту.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  🏁 ВЫДАЧА: Заказ #105                                   [ ✖ ОТМЕНА ] ║
╠═══════════════════════════════════════════════════════════════════════╣
║  👤 КЛИЕНТ: Петров П.П.                                               ║
║  🚗 АВТО:   BMW X5 (A 123 AA 77)                                      ║
║  📅 ДАТА ПРИЕМКИ: 25.11.2025     📅 ДАТА ЗАВЕРШЕНИЯ: 29.11.2025       ║
╠═══════════════════════════════════════════════════════════════════════╣
║  💰 ИТОГОВАЯ СУММА:                                                   ║
║  ┌─────────────────────────────────────────────────────────────────┐  ║
║  │ Работы:                                          4000 $         │  ║
║  │ Запчасти:                                        5000 $         │  ║
║  │ ─────────────────────────────────────────────────────────────   │  ║
║  │ ВСЕГО:                                           9000 $         │  ║
║  │ Оплачено ранее (аванс):                        - 3000 $         │  ║
║  │ ═════════════════════════════════════════════════════════════   │  ║
║  │ К ДОПЛАТЕ:                                       6000 $         │  ║
║  └─────────────────────────────────────────────────────────────────┘  ║
╠═══════════════════════════════════════════════════════════════════════╣
║  ОПЛАТА:                                                              ║
║  ○ Наличные    ● Карта    ○ Безналичный (Р/С)                        ║
╠═══════════════════════════════════════════════════════════════════════╣
║  [ 🖨️ ПЕЧАТЬ ЧЕКА ]   [ ✅ ПОДТВЕРДИТЬ ВЫДАЧУ ]                      ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Итоговая сумма**:
    *   **Аванс**: Если клиент вносил предоплату, она вычитается из общей суммы.
    *   **Только диагностика**: Если клиент отказался от ремонта (статус "К оплате"), в сумме будет только фиксированная стоимость диагностики (настраивается администратором).

2.  **Выбор способа оплаты**:
    *   Радио-кнопки для указания метода расчета (нужно для бухгалтерии).

3.  **Кнопка [ 🖨️ ПЕЧАТЬ ЧЕКА ]**:
    *   Формирует и отправляет на принтер чек/акт выполненных работ.
    *   Документ содержит: Название СТО, дата, ФИО клиента, список работ и запчастей, сумма.

4.  **Кнопка [ ✅ ПОДТВЕРДИТЬ ВЫДАЧУ ]**:
    *   **Действие**: Меняет статус заказа на **"Закрыт"**.
    *   Заказ перемещается в архив. Машина выдана клиенту.

### 6.17. Отмена Заказа (Cancel Order Confirmation)

Иногда заказ нужно отменить (клиент не пришел, отказался и т.д.).

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  ⚠️ ОТМЕНА ЗАКАЗА #105                                   [ ✖ ОТМЕНА ] ║
╠═══════════════════════════════════════════════════════════════════════╣
║  Вы уверены, что хотите отменить этот заказ?                          ║
║                                                                       ║
║  👤 Клиент: Петров П.П.                                               ║
║  🚗 Авто:   BMW X5                                                    ║
║  📅 Статус: В работе                                                  ║
╠═══════════════════════════════════════════════════════════════════════╣
║  ПРИЧИНА ОТМЕНЫ:                                                      ║
║  ┌─────────────────────────────────────────────────────────────────┐  ║
║  │ Клиент не явился за автомобилем__                               │  ║
║  │                                                                 │  ║
║  └─────────────────────────────────────────────────────────────────┘  ║
╠═══════════════════════════════════════════════════════════════════════╣
║  [ ❌ ПОДТВЕРДИТЬ ОТМЕНУ ]                                            ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Поле "Причина отмены"**:
    *   Обязательный комментарий для истории.

2.  **Кнопка [ ❌ ПОДТВЕРДИТЬ ОТМЕНУ ]**:
    *   **Действие**: Меняет статус заказа на **"Отменен"**.
    *   Заказ остается в базе для статистики, но не активен.
    *   **Обработка запчастей**:
        *   Если запчасти были **выданы**, но **не использованы** (работы не начаты) → Кладовщик возвращает их на склад. Количество на складе восстанавливается.
        *   Если запчасти **частично использованы** (например, расходники) → Мастер указывает, какие детали израсходованы. Они списываются окончательно, неиспользованные возвращаются.
        *   Если запчасти уже **установлены** на автомобиль → Они не возвращаются. В случае отмены клиент оплачивает стоимость установленных деталей и выполненных работ (формируется частичный акт).
    *   **Финансовый расчет**: Система автоматически рассчитывает сумму к оплате (диагностика + использованные материалы + выполненные работы).

### 6.18. Просмотр Архива (Archive View Popup)

Окно для поиска и просмотра завершенных и отмененных заказов. Доступно из главного меню.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  🗄️ АРХИВ ЗАКАЗОВ                                        [ ✖ ЗАКРЫТЬ ] ║
╠═══════════════════════════════════════════════════════════════════════╣
║  ФИЛЬТРЫ:                                                             ║
║  Период: [ 01.01.2025 ] - [ 30.11.2025 ]    Статус: [ Все (▼) ]      ║
║  🔎 ПОИСК: [ Клиент, авто, VIN..._________________________ ] [ 🔍 ]   ║
╠═══════════════════════════════════════════════════════════════════════╣
║  ┌────┬────────────┬──────────────┬─────────────┬─────────┬─────────┐ ║
║  │ #  │ Дата закр. │ Клиент       │ Автомобиль  │ Статус  │ Сумма   │ ║
║  ├────┼────────────┼──────────────┼─────────────┼─────────┼─────────┤ ║
║  │ 98 │ 10.10.2025 │ Петров П.П.  │ Toyota Cam. │ Закрыт  │ 5000 $  │ ║
║  │ 85 │ 01.05.2025 │ Сидоров А.А. │ Ford Focus  │ Закрыт  │ 12000 $ │ ║
║  │ 72 │ 22.03.2025 │ Иванов И.И.  │ BMW X5      │ Отменен │ 500 $   │ ║
║  └────┴────────────┴──────────────┴─────────────┴─────────┴─────────┘ ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Фильтры**:
    *   **Период**: Выбор диапазона дат для отображения.
    *   **Статус**: Показать только Закрытые, Отмененные или Все.

2.  **Поиск**:
    *   Поиск по имени клиента, автомобилю или VIN.

3.  **Таблица архива**:
    *   **Клик по строке**: Открывает окно **"Архивный Заказ"** (см. п. 6.14) для просмотра деталей.



### 6.19. Панель Администратора (Admin Dashboard)

Основной экран администратора для управления пользователями системы.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  🛡️ АДМИНИСТРАТОР: Ivanov I.I.                           [ ✖ ВЫХОД ] ║
╠════════════════════╦══════════════════════════════════════════════════╣
║  МЕНЮ:             ║  СПИСОК ПОЛЬЗОВАТЕЛЕЙ:                           ║
║  [ 👥 Сотрудники ] ║  ┌────┬──────────────────┬──────────┬────────┐   ║
║  [ ⚙️ Настройки  ] ║  │ ID │ ФИО              │ Роль     │ Статус │   ║
║  [ 📜 Логи       ] ║  ├────┼──────────────────┼──────────┼────────┤   ║
║                    ║  │ 1  │ Иванов И.И.      │ Админ    │ Актив  │   ║
║  ПРОСМОТР РОЛЕЙ:   ║  │ 2  │ Петров П.П.      │ Мастер   │ Актив  │   ║
║  [ 👨‍💼 Мастер     ] ║  │ 3  │ Сидоров С.С.     │ Работник │ Актив  │   ║
║  [ 🔍 Диагност   ] ║  └────┴──────────────────┴──────────┴────────┘   ║
║  [ 📦 Кладовщик  ] ║                                                  ║
║  [ 🔧 Цех        ] ║  [ ➕ ДОБАВИТЬ ]  [ ✏️ ИЗМЕНИТЬ ]  [ 🗑️ УДАЛИТЬ ] ║
╚════════════════════╩══════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Боковое Меню (Sidebar)**:
    *   **Основные разделы**: Сотрудники, Настройки, Логи.
    *   **Просмотр ролей**: Быстрый переход к интерфейсам других сотрудников (Мастер, Диагност и т.д.) для проверки работы.

2.  **Таблица пользователей**:
    *   **Выбор**: Клик по строке выделяет сотрудника для действий.

3.  **Кнопки действий**:
    *   **Добавить / Изменить / Удалить**: Управление учетными записями сотрудников.

### 6.20. Добавление Сотрудника (Add User Popup)

Всплывающее окно с пустой формой для регистрации нового сотрудника.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  ➕ НОВЫЙ СОТРУДНИК                                      [ ✖ ОТМЕНА ] ║
╠═══════════════════════════════════════════════════════════════════════╣
║  ФИО:       [ _______________________________________________ ]       ║
║  РОЛЬ:      [ Выберите роль (▼) ]                                     ║
║  ЛОГИН:     [ ________________ ]                                      ║
║  ПАРОЛЬ:    [ ________________ ]                                      ║
║  СТАТУС:    [ Активен (▼) ]                                           ║
╠═══════════════════════════════════════════════════════════════════════╣
║  [ 💾 СОЗДАТЬ ]                                                       ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Поля ввода**:
    *   **ФИО, Логин, Пароль**: Поля для ввода данных нового сотрудника.
    *   **Роль**: Выбор роли из списка.

2.  **Кнопка [ 💾 СОЗДАТЬ ]**:
    *   **Действие**: Создает новую учетную запись в БД.

### 6.21. Редактирование Сотрудника (Edit User Popup)

Всплывающее окно, открывающееся при редактировании. Поля предзаполнены текущими данными.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  ✏️ РЕДАКТИРОВАНИЕ: Петров П.П.                          [ ✖ ОТМЕНА ] ║
╠═══════════════════════════════════════════════════════════════════════╣
║  ФИО:       [ Петров Петр Петрович___________________________ ]       ║
║  РОЛЬ:      [ Мастер-Приёмщик (▼) ]                                   ║
║  ЛОГИН:     [ master______ ]                                          ║
║  ПАРОЛЬ:    [ ************ ]                                          ║
║  СТАТУС:    [ Активен (▼) ]                                           ║
╠═══════════════════════════════════════════════════════════════════════╣
║  [ 💾 СОХРАНИТЬ ]                                                     ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Поля ввода**:
    *   **ФИО, Логин, Роль, Статус**: Доступны для изменения.
    *   **Пароль**: Можно задать новый пароль (старый скрыт).

2.  **Кнопка [ 💾 СОХРАНИТЬ ]**:
    *   **Действие**: Сохраняет внесенные изменения.


### 6.22. Настройки Системы (System Settings Popup)

Всплывающее окно глобальных настроек СТО.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  ⚙️ НАСТРОЙКИ СИСТЕМЫ                                    [ ✖ ЗАКРЫТЬ ] ║
╠═══════════════════════════════════════════════════════════════════════╣
║  🏢 ИНФОРМАЦИЯ ОБ ОРГАНИЗАЦИИ:                                        ║
║  Название:  [ ООО "АвтоСервис Про"___________ ]                       ║
║  Адрес:     [ г. Минск, ул. Ленина, 1________ ]                       ║
║  Телефон:   [ +375 () ___-__-__ ]                                     ║
║                                                                       ║
║  Стоимость диагностики (фиксированная): [ 500 ] $                    ║
╠═══════════════════════════════════════════════════════════════════════╣
║  📅 ГРАФИК РАБОТЫ:                                                    ║
║  ┌─────────────────────────────────────────────────────────────────┐  ║
║  │ Пн - Пт:   09:00 - 18:00                                        │  ║
║  │ Сб:        10:00 - 15:00                                        │  ║
║  │ Вс:        Выходной                                             │  ║
║  └─────────────────────────────────────────────────────────────────┘  ║
╠═══════════════════════════════════════════════════════════════════════╣
║  [ 💾 СОХРАНИТЬ ]                                                     ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Информация об организации**:
    *   Используется для печати в шапке заказ-нарядов и актов.

2.  **Финансовые параметры**:
    *   **Нормо-час**: Базовая стоимость часа работы, используется для автоматического расчета стоимости услуг.

3.  **База данных**:
    *   **Создать резервную копию**: Сохраняет дамп базы данных в файл.
    *   **Восстановить**: Загружает базу данных из файла (требует подтверждения).

### 6.23. Журнал Событий (System Logs Popup)

Всплывающее окно для просмотра истории действий пользователей. Данные хранятся в **Базе Данных** для быстрого поиска и фильтрации.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  📜 ЖУРНАЛ СОБЫТИЙ (ЛОГИ)                                [ ✖ ЗАКРЫТЬ ] ║
╠═══════════════════════════════════════════════════════════════════════╣
║  ФИЛЬТР: [ Все события (▼) ]   ПОИСК: [ ___________________________ ] ║
╠═══════════════════════════════════════════════════════════════════════╣
║  ┌───────────────────┬───────────────┬──────────────┬────────────────┐ ║
║  │ Дата и Время      │ Пользователь  │ Событие      │ Детали         │ ║
║  ├───────────────────┼───────────────┼──────────────┼────────────────┤ ║
║  │ 30.11.2025 10:15  │ admin         │ Вход         │ Успешный вход  │ ║
║  │ 30.11.2025 10:20  │ master        │ Создание     │ Заказ #105     │ ║
║  │ 30.11.2025 11:00  │ admin         │ Удаление     │ User: worker2  │ ║
║  └───────────────────┴───────────────┴──────────────┴────────────────┘ ║
╠═══════════════════════════════════════════════════════════════════════╣
║  [ 📥 ЭКСПОРТ В CSV ]                                                 ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Фильтр и Поиск**:
    *   Позволяет отфильтровать события по типу (Вход, Ошибки, Изменения) или найти конкретную запись по тексту.

2.  **Таблица логов**:
    *   Отображает хронологию событий. Данные подгружаются из БД.

3.  **Экспорт**:
    *   Выгружает текущую выборку в файл CSV для внешнего аудита.

## 7. Интерфейс Диагноста (Diagnostician GUI)

Диагност видит только те автомобили, которые направлены к нему на осмотр. Его задача — выявить неисправности и составить список рекомендаций.

### 7.1. Рабочий стол Диагноста (Diagnostician Dashboard)

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  🔍 ДИАГНОСТ: Sidorov S.S.                               [ ✖ ВЫХОД ] ║
╠═══════════════════════════════════════════════════════════════════════╣
║  ОЖИДАЮТ ДИАГНОСТИКИ:                                                 ║
║  ┌────┬──────────────┬──────────────────┬───────────────────────────┐ ║
║  │ ID │ Автомобиль   │ Гос. Номер       │ Причина обращения         │ ║
║  ├────┼──────────────┼──────────────────┼───────────────────────────┤ ║
║  │ 105│ BMW X5       │ 1234 AB-7        │ Стук в подвеске           │ ║
║  │ 108│ Audi A6      │ 5678 CD-7        │ Горит Check Engine        │ ║
║  └────┴──────────────┴──────────────────┴───────────────────────────┘ ║
╠═══════════════════════════════════════════════════════════════════════╣
║  [ 📋 ПРОВЕСТИ ДИАГНОСТИКУ ]                                          ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Список автомобилей**:
    *   Отображает только заказы со статусом "Принят" или "На диагностике".
    *   **Выбор**: Клик по строке выбирает автомобиль для работы.

2.  **Кнопка [ 📋 ПРОВЕСТИ ДИАГНОСТИКУ ]**:
    *   **Действие**: Открывает окно ввода результатов диагностики (см. п. 7.2).

### 7.2. Результаты Диагностики (Diagnostics Popup)

Всплывающее окно, где диагност формирует список найденных проблем.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  📋 ДИАГНОСТИКА: BMW X5 (105)                            [ ✖ ОТМЕНА ] ║
╠═══════════════════════════════════════════════════════════════════════╣
║  ЖАЛОБА КЛИЕНТА: Стук в подвеске                                      ║
╠═══════════════════════════════════════════════════════════════════════╣
║  СПИСОК ВЫЯВЛЕННЫХ НЕИСПРАВНОСТЕЙ:                                    ║
║  ┌───┬──────────────────────────────┬──────────────────────────────┐  ║
║  │ # │ Узел / Неисправность         │ Комментарий диагноста        │  ║
║  ├───┼──────────────────────────────┼──────────────────────────────┤  ║
║  │ 1 │ Подвеска / Люфт шаровой      │ Передний левый рычаг         │  ║
║  │ 2 │ Тормоза / Износ колодок      │ Остаток 20%, срочно менять   │  ║
║  └───┴──────────────────────────────┴──────────────────────────────┘  ║
║  [ ➕ ДОБАВИТЬ НЕИСПРАВНОСТЬ ]   [ ➖ УДАЛИТЬ ]                       ║
╠═══════════════════════════════════════════════════════════════════════╣
║  [ 💾 ЗАВЕРШИТЬ ]                                                     ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Список неисправностей**:
    *   Таблица с добавленными дефектами.

2.  **Кнопка [ ➕ ДОБАВИТЬ НЕИСПРАВНОСТЬ ]**:
    *   Открывает окно выбора неисправности из справочника (см. п. 7.3).

3.  **Кнопка [ 💾 ЗАВЕРШИТЬ ]**:
    *   **Действие**: Сохраняет диагностическую карту. Статус заказа меняется на "Подбор запчастей". Заказ появляется у Кладовщика.

### 7.3. Добавление Неисправности (Add Fault Popup)

Окно выбора неисправности из базы знаний СТО.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  🔧 ДОБАВИТЬ НЕИСПРАВНОСТЬ                               [ ✖ ОТМЕНА ] ║
╠═══════════════════════════════════════════════════════════════════════╣
║  КАТЕГОРИЯ:   [ Подвеска (▼) ]                                        ║
║  НЕИСПРАВНОСТЬ: [ Люфт шаровой опоры (▼) ]                            ║
╠═══════════════════════════════════════════════════════════════════════╣
║  КОММЕНТАРИЙ (Детали, сторона, степень износа):                       ║
║  [ Передний левый рычаг, пыльник порван____________________________ ] ║
║  [ ________________________________________________________________ ] ║
╠═══════════════════════════════════════════════════════════════════════╣
║  [ 💾 ДОБАВИТЬ В СПИСОК ]                                             ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Категория и Неисправность**:
    *   Выбор из выпадающих списков. Это стандартизирует названия проблем в базе данных.

2.  **Комментарий**:
    *   Поле для уточнения деталей (например, "Левая сторона", "Сильный люфт").

3.  **Кнопка [ 💾 ДОБАВИТЬ В СПИСОК ]**:
    *   Добавляет запись в таблицу окна диагностики (7.2) и закрывает это окно.

## 8. Интерфейс Кладовщика (Storekeeper GUI)

Кладовщик отвечает за подбор запчастей для заказов. Он видит заказы, поступившие от диагноста или мастера.

### 8.1. Рабочий стол Кладовщика (Storekeeper Dashboard)

Кладовщик работает с двумя вкладками: **Подбор** (поиск деталей для новых заказов) и **Выдача в цех** (списание готовых запчастей).

#### 8.1a. Вкладка "ПОДБОР"

Заказы, ожидающие подбора запчастей от кладовщика.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  📦 КЛАДОВЩИК: Petrov P.P.                               [ ✖ ВЫХОД ] ║
╠═══════════════════════════════════════════════════════════════════════╣
║  ВКЛАДКИ: [ 🔍 ПОДБОР (2) ◄ ]   [ 📤 ВЫДАЧА В ЦЕХ (0) ]               ║
╠═══════════════════════════════════════════════════════════════════════╣
║  ЗАКАЗЫ НА ПОДБОР ЗАПЧАСТЕЙ (Статус: Подбор запчастей):               ║
║  ┌────┬──────────────┬──────────────────┬───────────────────────────┐ ║
║  │ ID │ Автомобиль   │ Диагност         │ Необходимые запчасти      │ ║
║  ├────┼──────────────┼──────────────────┼───────────────────────────┤ ║
║  │ 105│ BMW X5       │ Смирнов А.А.     │ Рычаг, Колодки            │ ║
║  │ 110│ Ford Focus   │ Иванов И.И.      │ Масло, Фильтр             │ ║
║  └────┴──────────────┴──────────────────┴───────────────────────────┘ ║
╠═══════════════════════════════════════════════════════════════════════╣
║  [ 📦 ПОДОБРАТЬ ЗАПЧАСТИ ]   [ 🔍 СКЛАД (Остатки) ]                   ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами:

1.  **Вкладка "ПОДБОР" (активна)**:
    *   Показывает заказы, где диагност завершил осмотр, и теперь нужно найти запчасти.
    *   **Выбор**: Клик по строке выбирает заказ.

2.  **Кнопка [ 📦 ПОДОБРАТЬ ЗАПЧАСТИ ]**:
    *   Открывает окно подбора запчастей (см. п. 8.2).

#### 8.1b. Вкладка "ВЫДАЧА В ЦЕХ"

Заказы, по которым запчасти уже выбраны и согласованы с клиентом, готовы к выдаче механику.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  📦 КЛАДОВЩИК: Petrov P.P.                               [ ✖ ВЫХОД ] ║
╠═══════════════════════════════════════════════════════════════════════╣
║  ВКЛАДКИ: [ 🔍 ПОДБОР (2) ]   [ 📤 ВЫДАЧА В ЦЕХ (1) ◄ ]               ║
╠═══════════════════════════════════════════════════════════════════════╣
║  ЗАКАЗЫ ОЖИДАЮЩИЕ ВЫДАЧИ ЗАПЧАСТЕЙ (Статус: В работе):                ║
║  ┌────┬──────────────┬──────────────────┬───────────────────────────┐ ║
║  │ ID │ Автомобиль   │ Механик          │ К выдаче                  │ ║
║  ├────┼──────────────┼──────────────────┼───────────────────────────┤ ║
║  │ 107│ Audi Q7      │ Сидоров С.С.     │ Масло Shell 5W30, Фильтр  │ ║
║  └────┴──────────────┴──────────────────┴───────────────────────────┘ ║
╠═══════════════════════════════════════════════════════════════════════╣
║  [ 📤 ВЫДАТЬ ЗАПЧАСТИ ]                                               ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами:

1.  **Вкладка "ВЫДАЧА В ЦЕХ" (активна)**:
    *   Показывает заказы, которые прошли согласование с клиентом, и работник ждет деталей.
    *   **Выбор**: Клик по строке выбирает заказ.

2.  **Кнопка [ 📤 ВЫДАТЬ ЗАПЧАСТИ ]**:
    *   Открывает окно списания запчастей со склада (см. п. 8.4).

### 8.2. Подбор Запчастей (Parts Selection Popup)

Окно, где кладовщик формирует **предложение** по запчастям. Он может добавить несколько вариантов одной детали (разные бренды, цены) для согласования с клиентом.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  📦 ПОДБОР: BMW X5 (VIN: WBA...)                         [ ✖ ОТМЕНА ] ║
╠═══════════════════════════════════════════════════════════════════════╣
║  НЕИСПРАВНОСТИ (От Диагноста):                                        ║
║  1. Подвеска / Люфт шаровой (Передний левый рычаг)                    ║
╠═══════════════════════════════════════════════════════════════════════╣
║  ПРЕДЛОЖЕНИЕ ПО ЗАПЧАСТЯМ (Для согласования):                         ║
║  ┌──────────────────────────────┬──────────┬──────────┬─────────────┐ ║
║  │ Наименование / Бренд         │ Поставщик│ Цена     │ Срок        │ ║
║  ├──────────────────────────────┼──────────┼──────────┼─────────────┤ ║
║  │ Рычаг пер. лев. (Lemforder)  │ Склад    │ 250.00   │ В наличии   │ ║
║  │ Рычаг пер. лев. (Patron)     │ Шате-М   │ 120.00   │ Завтра      │ ║
║  └──────────────────────────────┴──────────┴──────────┴─────────────┘ ║
║  [ ➕ ПОИСК И ДОБАВЛЕНИЕ ]   [ ➖ УДАЛИТЬ ВАРИАНТ ]                   ║
╠═══════════════════════════════════════════════════════════════════════╣
║  [ 💾 ОТПРАВИТЬ ]                                                     ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Кнопка [ ➕ ПОИСК И ДОБАВЛЕНИЕ ]**:
    *   Открывает окно расширенного поиска запчастей (см. п. 8.3).

2.  **Кнопка [ 💾 ОТПРАВИТЬ МАСТЕРУ... ]**:
    *   Передает сформированный список вариантов Мастеру-Приёмщику. Мастер увидит эти варианты и согласует с клиентом (например, клиент выберет дешевый Patron или дорогой Lemforder).

### 8.3. Поиск Запчастей (Parts Search Popup)

Окно поиска деталей по каталогам и поставщикам. **VIN-код подставляется автоматически**.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  🔍 ПОИСК ЗАПЧАСТЕЙ (VIN: WBA1234567890ABCD)             [ ✖ ЗАКРЫТЬ ] ║
╠═══════════════════════════════════════════════════════════════════════╣
║  ПОИСК: [ Рычаг передний левый_________________________ ] [ 🔎 НАЙТИ ]║
║  ФИЛЬТРЫ: [ Бренд (Все) ▼ ]  [ Поставщик (Все) ▼ ]  [ Срок (Все) ▼ ]  ║
╠═══════════════════════════════════════════════════════════════════════╣
║  РЕЗУЛЬТАТЫ ПОИСКА:                                                   ║
║  ┌──┬──────────────────────┬───────────┬───────────┬────────┬───────┐ ║
║  │# │ Деталь / Бренд       │ Поставщик │ Артикул   │ Цена   │ Срок  │ ║
║  ├──┼──────────────────────┼───────────┼───────────┼────────┼───────┤ ║
║  │☑ │ Рычаг (Lemforder)    │ Склад СТО │ 30333 01  │ 250.00 │ 0 дн. │ ║
║  │☐ │ Рычаг (TRW)          │ Армтек    │ JTC1001   │ 240.00 │ 1 дн. │ ║
║  │☑ │ Рычаг (Patron)       │ Шате-М    │ PS5005    │ 120.00 │ 1 дн. │ ║
║  │☐ │ Рычаг (Stellox)      │ Мотекс    │ 57-0001   │ 110.00 │ 2 дн. │ ║
║  └──┴──────────────────────┴───────────┴───────────┴────────┴───────┘ ║
╠═══════════════════════════════════════════════════════════════════════╣
║  [ 📥 ДОБАВИТЬ ВЫБРАННОЕ В ПРЕДЛОЖЕНИЕ (2) ]                          ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Автоматический контекст**:
    *   Поиск идет сразу по VIN-коду автомобиля из заказа, что исключает ошибки подбора.

2.  **Таблица результатов**:
    *   Показывает предложения от **собственного склада** и **внешних поставщиков** (Армтек, Шате-М и др.).
    *   **Чекбоксы (☑)**: Кладовщик отмечает несколько вариантов (например, "Хороший" и "Дешевый"), чтобы предоставить выбор клиенту.

3.  **Кнопка [ 📥 ДОБАВИТЬ ВЫБРАННОЕ... ]**:
    *   Переносит отмеченные позиции в окно подбора (8.2).

### 8.4. Выдача Запчастей (Issue Parts Popup)

Финальный этап работы кладовщика. Физическая передача деталей механику и списание их с баланса склада.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  📤 ВЫДАЧА В ЦЕХ: Заказ #105 (BMW X5)                    [ ✖ ОТМЕНА ] ║
╠═══════════════════════════════════════════════════════════════════════╣
║  ПОЛУЧАТЕЛЬ: Сидоров С.С. (Механик)                                   ║
╠═══════════════════════════════════════════════════════════════════════╣
║  СПИСОК К ВЫДАЧЕ:                                                     ║
║  ┌───┬──────────────────────────────┬──────────┬──────────┬─────────┐ ║
║  │ # │ Деталь / Бренд               │ Кол-во   │ Склад    │ Статус  │ ║
║  ├───┼──────────────────────────────┼──────────┼──────────┼─────────┤ ║
║  │ 1 │ Рычаг пер. лев. (Lemforder)  │ 1 шт.    │ A-12-05  │ В наличии│║
║  │ 2 │ Колодки торм. (Patron)       │ 1 компл. │ B-03-11  │ В наличии│║
║  └───┴──────────────────────────────┴──────────┴──────────┴─────────┘ ║
╠═══════════════════════════════════════════════════════════════════════╣
║  [ 📤 ПОДТВЕРДИТЬ ВЫДАЧУ И СПИСАТЬ ]                                  ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Кнопка [ 📤 ПОДТВЕРДИТЬ ВЫДАЧУ... ]**:
    *   **Действие**:
        1.  Списывает указанное количество товаров со склада (уменьшает остаток).
        2.  В заказе меняет статус запчастей с **"Заказано"** на **"Выдано в цех"**.
        3.  У Механика (п. 9.2) в списке запчастей статус автоматически обновляется на **"✅ Получено"**.
    *   **Учет**: Система фиксирует дату, время и ФИО кладовщика, выдавшего запчасти, для трейсабилити.

### 8.5. Просмотр Остатков Склада (Warehouse Stock Popup)

Окно для просмотра текущего наличия запчастей на складе. Кладовщик может быстро проверить, что есть в наличии.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  📦 ОСТАТКИ НА СКЛАДЕ                                    [ ✖ ЗАКРЫТЬ ] ║
╠═══════════════════════════════════════════════════════════════════════╣
║  🔎 ПОИСК: [ Фильтр_______________________________________ ] [ 🔍 ]   ║
╠═══════════════════════════════════════════════════════════════════════╣
║  ┌──────────────────────────┬─────────────┬────────┬─────────┬───────┐ ║
║  │ Деталь / Бренд           │ Артикул     │ Ячейка │ Остаток │ Мин.  │ ║
║  ├──────────────────────────┼─────────────┼────────┼─────────┼───────┤ ║
║  │ Масло Shell 5W30 (4л)    │ SH-5W30-4L  │ A-05-12│ 15 шт.  │ 5 шт. │ ║
║  │ Рычаг пер. (Lemforder)   │ LEM-30333   │ B-12-03│ 2 шт.   │ 2 шт. │ ║
║  │ ⚠️ Фильтр масл. (Mann)   │ MW-68/3     │ C-01-07│ 1 шт.   │ 5 шт. │ ║
║  │ Колодки торм. (Patron)   │ PTR-PS5005  │ A-08-15│ 8 компл.│ 3 шт. │ ║
║  └──────────────────────────┴─────────────┴────────┴─────────┴───────┘ ║
╠═══════════════════════════════════════════════════════════════════════╣
║  [ 📥 ДОБАВИТЬ ПОЗИЦИЮ ]   [ ➕ ЗАКАЗАТЬ У ПОСТАВЩИКА ]                ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Поиск**:
    *   Фильтрует список по названию детали или артикулу.

2.  **Таблица остатков**:
    *   **Остаток**: Текущее количество на складе.
    *   **Мин.**: Минимальный неснижаемый остаток (уровень для автоматического уведомления о необходимости заказа).
    *   **⚠️** — Предупреждение, если остаток ниже минимума.

3.  **Кнопка [ 📥 ДОБАВИТЬ ПОЗИЦИЮ ]**:
    *   Открывает форму для ручного добавления новой позиции на склад (приход).

4.  **Кнопка [ ➕ ЗАКАЗАТЬ У ПОСТАВЩИКА ]**:
    *   Формирует заявку поставщику на пополнение (опционально, для будущего функционала).

## 9. Интерфейс Работника (Worker GUI)

Работник (слесарь, электрик, моторист, шиномонтажник и др.) видит список автомобилей, над которыми нужно провести работы в соответствии с его специализацией. Его интерфейс максимально прост и адаптирован под сенсорные экраны в цеху.

### 9.1. Рабочий стол Работника (Worker Dashboard)

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  🔧 РАБОТНИК: Sidorov S.S.                                [ ✖ ВЫХОД ] ║
╠═══════════════════════════════════════════════════════════════════════╣
║  МОИ ЗАДАЧИ (В РАБОТЕ):                                               ║
║  ┌────┬──────────────┬───────────────────────────────────────────────┐ ║
║  │ ID │ Автомобиль   │ Статус                                        │ ║
║  ├────┼──────────────┼───────────────────────────────────────────────┤ ║
║  │ 105│ BMW X5       │ Ожидает начала                                │ ║
║  │ 112│ Audi Q7      │ В работе (01:15)                              │ ║
║  └────┴──────────────┴───────────────────────────────────────────────┘ ║
╠═══════════════════════════════════════════════════════════════════════╣
║  [ 🔧 ОТКРЫТЬ ЗАКАЗ-НАРЯД ]                                           ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Список задач**:
    *   Отображает заказы, назначенные на этого работника мастером-приёмщиком.
    *   **Выбор**: Клик по строке выбирает заказ.

2.  **Кнопка [ 🔧 ОТКРЫТЬ ЗАКАЗ-НАРЯД ]**:
    *   Открывает список работ по выбранному автомобилю (см. п. 9.2).

### 9.2. Выполнение Работ (Order Execution Popup)

Электронный заказ-наряд. Работник отмечает выполненные пункты.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  🔧 ЗАКАЗ #105: BMW X5                                   [ ✖ ЗАКРЫТЬ ] ║
╠═══════════════════════════════════════════════════════════════════════╣
║  НЕОБХОДИМЫЕ РАБОТЫ:                                                  ║
║  ┌──┬────────────────────────────────────────┬───────────┬──────────┐ ║
║  │  │ Наименование работ                     │ Норма (ч) │ Статус   │ ║
║  ├──┼────────────────────────────────────────┼───────────┼──────────┤ ║
║  │☑ │ Замена переднего левого рычага         │ 1.5       │ Готово   │ ║
║  │☐ │ Замена передних тормозных колодок      │ 0.8       │ В работе │ ║
║  │☐ │ Проверка уровня тормозной жидкости     │ 0.2       │ Ожидание │ ║
║  └──┴────────────────────────────────────────┴───────────┴──────────┘ ║
║                                                                       ║
║  ИСПОЛЬЗУЕМЫЕ ЗАПЧАСТИ:                                               ║
║  ┌──┬─────────────────────────────────────────────────────┬─────────┐ ║
║  │  │ Деталь                                              │ Статус  │ ║
║  ├──┼─────────────────────────────────────────────────────┼─────────┤ ║
║  │✅│ Рычаг передний левый (Lemforder)                    │ Получено│ ║
║  │⏳│ Колодки тормозные (Patron)                          │ Заказано│ ║
║  └──┴─────────────────────────────────────────────────────┴─────────┘ ║
║                                                                       ║
║  [ ▶️ НАЧАТЬ РАБОТУ ]   [ ✅ ОТМЕТИТЬ ВЫПОЛНЕННЫМ ]                   ║
║  [ 📋 ОТЧЕТ ДИАГНОСТА ] [ 🏁 ЗАВЕРШИТЬ ВЕСЬ ЗАКАЗ ]                   ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Таблица работ**:
    *   **Чекбоксы (☑/☐)**: Показывают прогресс. Работник выбирает пункт, над которым работает.

2.  **Таблица запчастей**:
    *   **Статусы**:
        *   ✅ **Получено** — деталь выдана кладовщиком, можно использовать.
        *   ⏳ **Заказано** — деталь в пути, работу начать нельзя.
        *   📦 **На складе** — деталь есть, нужно забрать у кладовщика.

3.  **Кнопки управления**:
    *   **[ ▶️ НАЧАТЬ РАБОТУ ]**: Запускает таймер по выбранной задаче (опционально, для учета реального времени).
    *   **[ ✅ ОТМЕТИТЬ ВЫПОЛНЕННЫМ ]**: Меняет статус выбранной работы на "Готово".
    *   **[ 📋 ОТЧЕТ ДИАГНОСТА ]**: Открывает окно с результатами диагностики (список неисправностей и комментарии диагноста), чтобы работник понимал контекст проблемы.

4.  **Кнопка [ 🏁 ЗАВЕРШИТЬ ВЕСЬ ЗАКАЗ ]**:
    *   Активна только когда **все** работы отмечены как выполненные.
    *   Переводит заказ в статус "Готов к выдаче".
    *   Уведомляет Мастера-Приёмщика, что машину можно отдавать клиенту.

### 9.3. Просмотр Отчета Диагноста (Diagnostician Report Popup)

Информационное окно, позволяющее работнику увидеть, что именно нашел диагност. Это помогает понять контекст ремонта.

```text
╔═══════════════════════════════════════════════════════════════════════╗
║  📋 ОТЧЕТ ДИАГНОСТА: BMW X5 (105)                        [ ✖ ЗАКРЫТЬ ] ║
╠═══════════════════════════════════════════════════════════════════════╣
║  ЖАЛОБА КЛИЕНТА: Стук в подвеске                                      ║
╠═══════════════════════════════════════════════════════════════════════╣
║  ВЫЯВЛЕННЫЕ НЕИСПРАВНОСТИ:                                            ║
║  ┌───┬──────────────────────────────┬──────────────────────────────┐  ║
║  │ # │ Неисправность                │ Комментарий диагноста        │  ║
║  ├───┼──────────────────────────────┼──────────────────────────────┤  ║
║  │ 1 │ Люфт шаровой опоры           │ Передний левый рычаг, сильный│  ║
║  │   │                              │ люфт, пыльник порван.        │  ║
║  │ 2 │ Износ тормозных колодок      │ Передние, остаток < 20%.     │  ║
║  └───┴──────────────────────────────┴──────────────────────────────┘  ║
╚═══════════════════════════════════════════════════════════════════════╝
```

#### Взаимодействие с элементами (Interactions):

1.  **Только чтение**:
    *   Работник не может редактировать этот отчет, только просматривать.
