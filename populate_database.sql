-- Файл для заполнения базы данных начальными данными

-- 1. Заполнение таблицы пользователей
INSERT INTO users (full_name, role, login, password_hash, status) VALUES
('Иванов Иван Иванович', 'Admin', 'admin', 'hashed_password_1', 'Active'),
('Петров Петр Петрович', 'Master', 'master', 'hashed_password_2', 'Active'),
('Сидоров Алексей Николаевич', 'Diagnostician', 'diagnostician', 'hashed_password_3', 'Active'),
('Кузнецов Михаил Дмитриевич', 'Storekeeper', 'storekeeper', 'hashed_password_4', 'Active'),
('Волков Сергей Алексеевич', 'Worker', 'worker', 'hashed_password_5', 'Active'),
('Козлов Дмитрий Андреевич', 'Worker', 'worker2', 'hashed_password_6', 'Active'),
('Морозов Алексей Викторович', 'Worker', 'worker3', 'hashed_password_7', 'Active');

-- 2. Заполнение таблицы клиентов
INSERT INTO clients (full_name, phone, address) VALUES
('Смирнов Александр Петрович', '+79123456789', 'г. Москва, ул. Ленина, д. 10'),
('Волкова Мария Николаевна', '+79123456790', 'г. Санкт-Петербург, ул. Пушкина, д. 15'),
('Козлов Артём Дмитриевич', '+79123456791', 'г. Новосибирск, ул. Гагарина, д. 7'),
('Морозова Елена Владимировна', '+79123456792', 'г. Екатеринбург, ул. Лермонтова, д. 22'),
('Новиков Игорь Сергеевич', '+79123456793', 'г. Казань, ул. Толстого, д. 30'),
('Федорова Ольга Николаевна', '+79123456794', 'г. Нижний Новгород, ул. Чехова, д. 5'),
('Михайлов Андрей Валерьевич', '+79123456795', 'г. Челябинск, ул. Пушкина, д. 41'),
('Белова Татьяна Александровна', '+79123456796', 'г. Самара, ул. Гоголя, д. 18');

-- 3. Заполнение таблицы автомобилей
INSERT INTO cars (client_id, vin, license_plate, make, model, production_year, mileage) VALUES
(1, 'WBA11111111111111', 'А111АА777', 'BMW', 'X5', 2018, 45000),
(2, 'JH4NA21691T000000', 'В222ВВ123', 'Honda', 'CR-V', 2019, 35000),
(3, '1C4NJDEB0HD123456', 'С333СС456', 'Jeep', 'Cherokee', 2017, 62000),
(4, 'WBA22222222222222', 'Е444ЕЕ789', 'BMW', '320i', 2020, 28000),
(5, 'VF1LMHBSH95555555', 'М555ММ901', 'Peugeot', '308', 2016, 75000),
(6, 'WDD1771431A123456', 'К666КК234', 'Mercedes-Benz', 'C-Class', 2019, 42000),
(7, 'WVWZZZ1KZAW123456', 'Н777НН567', 'Volkswagen', 'Tiguan', 2021, 18000),
(8, 'JF2SH2A62DH123456', 'О888ОО890', 'Subaru', 'Outback', 2020, 31000);

-- 4. Заполнение справочника услуг
INSERT INTO services_reference (name, base_price, norm_hours) VALUES
('Диагностика двигателя', 1500.00, 0.5),
('Замена масла и фильтра', 1200.00, 0.8),
('Ремонт тормозной системы', 3000.00, 2.0),
('Замена свечей зажигания', 1800.00, 1.0),
('Ремонт подвески', 4500.00, 3.5),
('Комплексное ТО', 5000.00, 4.0),
('Замена АКПП', 15000.00, 8.0),
('Ремонт ДВС', 25000.00, 15.0),
('Замена сцепления', 6000.00, 4.5),
('Ремонт электрооборудования', 2000.00, 1.5);

-- 5. Заполнение склада
INSERT INTO warehouse (name, brand, article, location_cell, quantity, min_quantity, purchase_price, selling_price) VALUES
('Моторное масло 5W-30', 'Shell', 'HE1010', 'A-01-01', 50, 5, 450.00, 650.00),
('Воздушный фильтр', 'Bosch', 'F026300610', 'A-02-01', 30, 3, 300.00, 500.00),
('Свечи зажигания', 'NGK', 'BKR6EIX', 'A-03-01', 40, 4, 150.00, 250.00),
('Тормозные колодки передние', 'Brembo', 'P62016', 'A-04-01', 25, 2, 1500.00, 2200.00),
('Тормозные колодки задние', 'Brembo', 'P62017', 'A-04-02', 25, 2, 1300.00, 2000.00),
('Аккумулятор 60А/ч', 'Varta', 'E15-550', 'A-05-01', 15, 1, 3500.00, 5500.00),
('Амортизатор передний', 'Kayaba', '343065', 'A-06-01', 20, 2, 2500.00, 4000.00),
('Амортизатор задний', 'Kayaba', '343066', 'A-06-02', 20, 2, 2300.00, 3800.00),
('Топливный фильтр', 'Mann-Filter', 'WK845', 'A-07-01', 35, 3, 400.00, 650.00),
('Помпа охлаждения', 'INA', '554502420', 'A-08-01', 12, 1, 2500.00, 4500.00);

-- 6. Создание заказов
INSERT INTO orders (client_id, car_id, master_id, status, complaint, current_mileage, prepayment) VALUES
(1, 1, 2, 'In_Work', 'Стук в двигателе при запуске', 45000, 5000.00),
(2, 2, 2, 'Diagnostics', 'Проблемы с коробкой передач', 35000, 0.00),
(3, 3, 2, 'Parts_Selection', 'Плохо держит курс', 62000, 0.00),
(4, 4, 2, 'Approval', 'Плохая работа кондиционера', 28000, 3000.00),
(5, 5, 2, 'Ready', 'Диагностика по гарантии', 75000, 0.00),
(6, 6, 2, 'New', 'Плановое ТО', 42000, 0.00),
(7, 7, 2, 'Quality_Control', 'Проверка после ремонта', 18000, 0.00),
(8, 8, 2, 'Closed', 'Завершенный заказ', 31000, 2000.00);

-- 7. Добавление дефектов в ведомость
INSERT INTO order_defects (order_id, diagnostician_id, defect_description, diagnostician_comment, is_confirmed) VALUES
(1, 3, 'Повышенный расход масла', 'Возможно, залегли кольца или выработка цилиндров', TRUE),
(1, 3, 'Повышенный шум в двигателе', 'Подшипники коленвала изношены', TRUE),
(2, 3, 'Толчки при переключении передач', 'Нужна замена сцепления', TRUE),
(3, 3, 'Развал-схождение вышло', 'Нужна замена стоек амортизаторов', FALSE);

-- 8. Добавление работ в заказ
INSERT INTO order_works (order_id, service_id, service_name_snapshot, price, norm_hours, worker_id, status) VALUES
(1, 1, 'Диагностика двигателя', 1500.00, 0.5, 5, 'In_Progress'),
(1, 8, 'Ремонт ДВС', 25000.00, 15.0, 5, 'Pending'),
(2, 2, 'Замена масла и фильтра', 1200.00, 0.8, 6, 'Done'),
(2, 9, 'Замена сцепления', 6000.00, 4.5, 6, 'In_Progress'),
(3, 5, 'Ремонт подвески', 4500.00, 3.5, 7, 'Pending'),
(4, 1, 'Диагностика двигателя', 1500.00, 0.5, 5, 'Done'),
(5, 1, 'Диагностика двигателя', 1500.00, 0.5, 6, 'Done');

-- 9. Добавление запчастей в заказ
INSERT INTO order_parts (order_id, warehouse_item_id, part_name_snapshot, brand, supplier, quantity, price_per_unit, source_type, is_issued) VALUES
(1, 1, 'Моторное масло 5W-30', 'Shell', NULL, 1, 650.00, 'Stock', TRUE),
(1, 3, 'Свечи зажигания', 'NGK', NULL, 4, 250.00, 'Stock', TRUE),
(2, 1, 'Моторное масло 5W-30', 'Shell', NULL, 1, 650.00, 'Stock', TRUE),
(2, 9, 'Топливный фильтр', 'Mann-Filter', NULL, 1, 650.00, 'Stock', TRUE),
(2, NULL, 'Диски сцепления', 'Original', 'АвтоДеталь', 1, 5000.00, 'Supplier', FALSE),
(3, 7, 'Амортизатор передний', 'Kayaba', NULL, 2, 4000.00, 'Stock', TRUE),
(4, 6, 'Аккумулятор 60А/ч', 'Varta', NULL, 1, 5500.00, 'Stock', TRUE);

-- 10. Добавление логов системы
INSERT INTO system_logs (user_id, event_type, description, ip_address) VALUES
(1, 'Login', 'Вход в систему администратора', '127.0.0.1'),
(2, 'Create_Order', 'Создан заказ-наряд №1', '127.0.0.1'),
(3, 'Diagnostics', 'Проведена диагностика по заказу №1', '127.0.0.1'),
(4, 'Issue_Part', 'Выдана деталь из склада', '127.0.0.1'),
(5, 'Start_Work', 'Начата работа по заказу №1', '127.0.0.1');